"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getGuestId = void 0;
// © Sitecore Corporation A/S. All rights reserved. Sitecore® is a registered trademark of Sitecore Corporation A/S.
const utils_1 = require("@sitecore-cloudsdk/utils");
const initializer_1 = require("../initializer/browser/initializer");
const fetch_guest_id_from_edge_proxy_1 = require("./fetch-guest-id-from-edge-proxy");
/**
 * A function that returns the guest ID.
 * @returns - A promise that resolves with the guest ID
 * @throws - Will throw an error if the sitecoreEdgeContextId is incorrect
 */
async function getGuestId() {
    const settings = (0, initializer_1.getCloudSDKSettings)();
    const id = (0, utils_1.getCookieValueClientSide)(settings.cookieSettings.name.browserId);
    return (0, fetch_guest_id_from_edge_proxy_1.fetchGuestIdFromEdgeProxy)(id, settings.sitecoreEdgeContextId, settings.sitecoreEdgeUrl);
}
exports.getGuestId = getGuestId;
